apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: uptime-kuma
  namespace: monitoring
spec:
  entryPoints:
  - web
  - websecure
  routes:
  - kind: Rule
    match: Host(`kuma.yirrasystems.com`) && PathPrefix(`/`) && (Headers(`CF-Connecting-IP`, `122.199.30.183`) || HeadersRegexp(`X-Forwarded-For`, `(^|,\\s*)122\\.199\\.30\\.183(,|$)`))
    priority: 10
    services:
    - name: uptime-kuma-service
      port: 3001


