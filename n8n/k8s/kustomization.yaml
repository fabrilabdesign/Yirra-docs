apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ENFORCE n8n namespace for all resources
# This prevents accidental deployment to wrong namespace
namespace: n8n

resources:
  - pvc.yaml
  - postgres-pvc.yaml
  - postgres-secret.yaml
  - postgres-deployment.yaml
  - postgres-service.yaml
  - deployment.yaml
  - service.yaml
  - ingress.yaml
  - network-policy.yaml

# Add common labels to all resources
commonLabels:
  managed-by: kustomize
  project: n8n-automation

# Add annotations to track deployment
commonAnnotations:
  deployed-by: kustomize
  namespace-enforced: "true"

